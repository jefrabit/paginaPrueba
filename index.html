<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Analizador de Links</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #0f172a; color: #f1f5f9; }
  h1 { color: #38bdf8; }
  input, button { padding: 10px; border-radius: 8px; border: none; }
  input { width: 60%; }
  button { background: #38bdf8; color: black; cursor: pointer; margin-left: 5px; }
  .card { background: #1e293b; padding: 15px; border-radius: 12px; margin-top: 20px; }
  .pill { display:inline-block; padding:4px 10px; border-radius:8px; background:#0b1222; margin:2px; }
</style>
</head>
<body>
  <h1>üîó Analizador de Links</h1>
  <p>Pega cualquier enlace y obt√©n detalles (dominio, ruta, par√°metros, QR).</p>
  <input id="url" type="text" placeholder="https://ejemplo.com/page?x=1&y=2">
  <button onclick="analizar()">Analizar</button>

  <div id="result" class="card" style="display:none"></div>

  <div id="qr" class="card" style="display:none">
    <h2>üì± C√≥digo QR del link</h2>
    <canvas id="qrcanvas"></canvas>
  </div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
function analizar() {
  const input = document.getElementById("url").value.trim();
  if (!input) return alert("Ingresa un enlace v√°lido.");
  let u;
  try {
    u = new URL(input);
  } catch(e) {
    return alert("URL no v√°lida.");
  }

  let html = `<h2>Detalles del enlace</h2>`;
  html += `<p><b>Protocolo:</b> ${u.protocol}</p>`;
  html += `<p><b>Dominio:</b> ${u.hostname}</p>`;
  html += `<p><b>Ruta:</b> ${u.pathname}</p>`;

  if (u.searchParams.toString()) {
    html += `<p><b>Par√°metros:</b></p><div>`;
    for (const [k,v] of u.searchParams.entries()) {
      html += `<span class="pill">${k} = ${v}</span>`;
    }
    html += `</div>`;
  } else {
    html += `<p><b>Par√°metros:</b> ninguno</p>`;
  }

  html += `<p><a href="${u.href}" target="_blank" style="color:#38bdf8">Abrir enlace</a></p>`;

  document.getElementById("result").innerHTML = html;
  document.getElementById("result").style.display = "block";

  // Generar QR
  document.getElementById("qr").style.display = "block";
  QRCode.toCanvas(document.getElementById("qrcanvas"), u.href, { width: 200 }, function (error) {
    if (error) console.error(error);
  });
}
</script>
</body>
</html>
